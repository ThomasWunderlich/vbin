<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="http://crowfly.net/css/main.css" rel="stylesheet" type="text/css" />
<link href="css/vbin.css" rel="stylesheet" type="text/css" />
<title>vbin</title>
</head>

<body>

<center><h3>vbin</h3></center>

<p><i><b>vbin</b></i> is a collection of Command Line Tools for Unix.  They are used with other Unix Bash commands to form a formiable arsenal of tools.</p>

<p>Source: <a href="https://github.com/dlink/vbin">https://github.com/dlink/vbin</a></p>

<div id="topics">
<p>Topics</p>
<p>10/27/2014: Not yet fully documented. see github</p>
<table border=1 cellpadding=1 cellspacing=0>
   <tr>
      <td><a href="#installHelp" class="simpleLink">Installation</a></td>
      <td><a href="#clipHelp" class="simpleLink">clip</a></td>
      <td><a href="#col_sumHelp" class="simpleLink">col_sum</a></td>
      <td><a href="#lsheadHelp" class="simpleLink">lshead</a></td>
      <td><a href="#psgrepHelp" class="simpleLink">psgrep</a></td>
      <td><a href="#revverHelp" class="simpleLink">revver</a></td>
      <td><a href="#savHelp" class="simpleLink">sav</a></td>
      <td><a href="#savdiffHelp" class="simpleLink">savdiff</a></td>
   <tr>
   </tr>
      <td><a href="#takeHelp" class="simpleLink">take</a></td>
      <td><a href="#t2cHelp" class="simpleLink">t2c</a></td>
      <td><a href="#unsavHelp" class="simpleLink">unsav</a></td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
   </tr>
</table>
</div>

<hr>

<!-- install ----------------------------------------->

<div id="installHelp">
<h4>Installation</h4>

<p>In a nutshell here it is:</p>
<pre>

   $ git clone git@github.com:dlink/vbin.git
   $ export PATH=$PATH:$HOME/vbin

</pre>

You can add the PATH command to your .bash_profile.

<h5>Site Install</h5>

<p>A good place to install <i>vbin</i> is in /usr/local/vbin, as root.  Then add it to the Unix PATH in /etc/profile.d for everyone<p>

Here is an example install as root:
<pre>

   $ sudo su -
   # cd /usr/local
   # git clone git@github.com:dlink/vbin.git

   # cd /etc/profile.d
   # cat > vbin
   PATH=$PATH:/usr/local/vbin
   ^D  (cntrl-D)

</pre>

Test it:

<pre>

   $ lshead

</pre>

See, Also:

<a href="#topics">topics</a>

<hr>

<!-- clip -------------------------------------------->

<div id="clipHelp">
<h4>clip</h4>
<p>Clip the output on the screen horizontally, to avoid word wrap.  You can in affect page right and left thru very wide outputs<p>

<pre class="syntax">

    SOMECOMMAND | clip [long] [&lt;PAGE_NUM&gt;]

</pre>

<p>Clip defaults to 80 columns.</p>

<p>Example: 

For 80 column screens: 

<pre>

   $ cat log | clip      # show first page, ie. cut -c1-80)
   $ cat log | clip 2    # show second page, ie. cut -c81-160
   $ cat log | clip 3    # show third page, ie. cut -c161-240

</pre>

For wider screens     

<pre>

   $ cat log | clip long      # show first long page, ie. cut -c1-158
   $ cat log | clip long 2    # show second long page, ie. cut -c159-316

</pre>


See, Also:

<a href="#topics">topics</a>
<hr>

<!-- col_sum ----------------------------------------->

<div id="col_sumHelp">
<h4>col_sum</h4>
<p>Add up a column of numbers.  Works well with tables and csv files</p>

<pre class="syntax">

   &lt;STDOUT&gt; | col_sum [ &lt;COL&gt; ]

	COL - Number of the column you want to sum up
              Zero base.
              Default is 0
</pre>

<p>Example: </p>

</pre>

   df -m | col_sum +3

</pre>

Sum available diskspace across all drives in MB.

<pre>

   grep -c class *.py | cut -d':' -f2 | col_sum

</pre>

Count number of classes all python programs:


For wider screens     

<pre>

   $ cat log | clip long      # show first long page, ie. cut -c1-158
   $ cat log | clip long 2    # show second long page, ie. cut -c159-316

</pre>


See, Also:

<a href="#topics">topics</a>
<hr>
<!-- lshead ------------------------------------------>

<div id="lsheadHelp">
<h4>lshead</h4>
List the top 10 most recently edited files in a subdirectory.

<pre class="syntax">

   lshead [&lt;directory&gt;]

</pre>

The command simply does a <i>ls -l | head &lt;directory&gt;</i>.  It is an excellent way to see what was being worked on recenly.

<p>Example:</p>

<pre>

   $ lshead
   total 232
   -rwxrwxr-x  1 dlink fwk 55136 Sep 26 11:07 #bookserver.py#
   -rw-rw-r--  1 dlink fwk 29863 Sep 26 10:47 overlay.pyc
   -rw-rw-r--  1 dlink fwk 40520 Sep 26 10:19 bookserver.pyc
   drwxrwxr-x  2 dlink fwk  4096 Sep 26 10:19 alter_xmls
   -rwxrwxr-x  1 dlink fwk 55136 Sep 26 10:19 bookserver.py
   drwxrwxr-x  2 dlink fwk  4096 Sep 26 10:19 elements
   -rwxrwxr-x  1 dlink fwk 39698 Sep 16 16:46 overlay.py
   -rwxrwxr-x  1 dlink fwk  9567 Sep 16 08:09 bss.py
   -rw-rw-r--  1 dlink fwk  4214 Sep 16 07:53 fupload.pyc

</pre>

See, Also:

<a href="#topics">topics</a>
<hr>

<!-- psgrep ------------------------------------------>

<div id="psgrepHelp">
<h4>psgrep</h4>
Search all running processes.  It is a combination of <i>ps</i> and <i>grep</i>.

<pre class="syntax">

   psgrep PATTERN

</pre>

The command simply does a <i>ps -ef | grep PATTERN</i>.  It is an excellent way to see whats running.

The command will aways return your current process, as well.

<p>Examples:</p>

<p>Is MySQL running?:</p>
<pre>

   $ psgrep mysql
   mysql      917     1  0 Sep28 ?        00:26:44 /usr/sbin/mysqld
   dlink    16116 16114  0 22:53 pts/2    00:00:00 grep mysql

</pre>
<p>Yes.</p>

<p>Is Plague online?</p>

<pre>

   $ psgrep plague  
   plague      29510 29508  0 Sep26 ?        00:00:00 -bash -c cd /asphyxia/lib && ./asphyx.py 
   plague      29539 29510  0 Sep26 ?        02:50:51 /usr/local/bin/python ./asphx.py
   plague      29577 29576  0 Sep26 ?        00:00:00 -bash -c cd /asphyxia/lib && ./workflowd.py 
   plague      29606 29577  0 Sep26 ?        02:38:57 python ./workflowd.py

</pre>
<p>No, but he's running some daemons.</p>

See, Also:

<a href="#topics">topics</a>
<hr>

<!-- revver ------------------------------------------>

<div id="revverHelp">
<h4>revver</h4>
<p>Roll revision copies of a file with postfixes: _1, _2, etc. It is inspired by VMS O/S.</p>

<pre class="syntax">

   revver [&lt;options&gt;] &lt;filename&gt;

        options:
           -q  quite mode
           -u  Unroll revisions

</pre>

<p>Example:</p>

<pre>

  $ revver book.xml
  mv -f book.xml book.xml_1

</pre>

Running the same command a second time (after recreating the original):

<pre>

  $ revver book.xml
  mv -f book.xml_1 book.xml_2
  mv -f book.xml book_xml_1

</pre>

<p>A maximum of 10 revisions will be kept.</p>

<p>The -u command unrolls revisions.   It also makes a "_bak" copy of the original before it is replaced with the "_1"</p>

<pre>

  $ revver -u book.xml
  mv -f book.xml book.xml_bak
  mv -f book.xml_1 book.xml
  mv -f book.xml_2 book_xml_1

</pre>

See, Also:

<a href="#topics">topics</a>, <a href="#savHelp">sav</a>, <a href="#savdiffHelp">savdiff</a>, <a href="#unsavHelp">unsav</a>

<hr>

<!-- sav --------------------------------------------->

<div id="savHelp">
<h4>sav</h4>
<p>Create a copy of a file, preserving timestamp and permissions.  The new file will have the '.sav' file extenion.</p>

<pre class="syntax">

   sav &lt;filename&gt;

</pre>
<p>Example:<p>

<pre>

   $ sav professors.csv
   cp -p professors.csv professors.csv.sav

</pre>

See, Also:

<a href="#topics">topics</a>, <a href="#savdiffHelp">savdiff</a>, <a href="#unsavHelp">unsav</a>, <a href="#revverHelp">revver</a>

<hr>
<!-- savdiff ----------------------------------------->

<div id="savdiffHelp">
<h4>savdiff</h4>
<p>Compare a saved copy of a file with the original.  This command assumes you have run the <a href="#savHelp">sav</a> command previously.
<pre class="syntax">

   savdiff &lt;filename&gt;

</pre>

<p>Example:<p>

<pre>

   $ savdiff professors.csv
   diff  professors.csv.sav professors.csv.sav
   ...

</pre>

See, Also:

<a href="#topics">topics</a>, <a href="#savHelp">sav</a>, <a href="#unsavHelp">unsav</a>, <a href="#revverHelp">revver</a>

<hr>
<!-- take -------------------------------------------->

<div id="takeHelp">
<h4>take</h4>
<p>"Take" some lines out of a file between two given line numbers (&lt;FROM&gt; and &lt;TO&gt;).  This is useful for cutting groups of lines out of long files.<p>

<pre class="syntax">

   &lt;STDOUT&gt; | take &lt;FROM&gt; &lt;TO&gt;

</pre>

<p>Example:<p>


# eq.
#     # the following returns 10 lines (11, ..., 20)
#     cat books.csv | take 10 20   

<pre>

   $ cat ids.csv | take 1001 2000

</pre>
<p>The above returns 1000 lines from ids.csv (lines 1001, ..., 2000)</p>

<pre>

   $ cat ids.csv | take 1000 2000 | while read i; do echo $i ; ./myprocess.py $i ; done

</pre>
<p>The above displays and processes each id returned from take.</p>


<a href="#topics">topics</a>

<hr>
<!-- unsav ------------------------------------------->

<div id="unsavHelp">
<h4>unsav</h4>
<p>Copy a saved file back to the original.  This is the reverse of the <a href="#savHelp">sav</a> command.
<pre class="syntax">

   unsav &lt;filename&gt;

</pre>

<p>Example:</p>

<pre>

   $ unsav professors.csv
   cp -p professors.csv/sav professors.csv

</pre>

See, Also:

<a href="#topics">topics</a>, <a href="#savHelp">sav</a>, <a href="#savdiffHelp">savdiff</a>, <a href="#revverHelp">revver</a>




</div>

</body>
